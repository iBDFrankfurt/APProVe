#==================================================================================
# APProVe Server Deployment Environment Configuration
# Version: 4.0.0
# Last Updated: 2026-02-02
#==================================================================================

#----------------------------------------------------------------------------------
# EXTERNAL DOCKER IMAGES
#----------------------------------------------------------------------------------
KEYCLOAK_IMAGE=quay.io/keycloak/keycloak:23.0.4
MONGO_IMAGE=mongo:7-jammy
POSTGRES_IMAGE=postgres:16

#----------------------------------------------------------------------------------
# APPROVE SERVICE IMAGES
# Registry: registry.gitlab.ibdf-frankfurt.de
#----------------------------------------------------------------------------------
CONFIG_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-config-service/master:4.0.0
EUREKA_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-eureka-service/master:4.0.0
BACKEND_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-backend-service/4.0.0:4.0.0
FRONTEND_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-frontend-service/4.0.0:4.0.0
USER_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-user-service/master:4.0.0
COMMENT_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/comment-service/master:4.0.0
EMAIL_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-email-service/master:4.0.0
AUTOMATION_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-automation-service/master:4.0.0
MANUAL_IMAGE=registry.gitlab.ibdf-frankfurt.de/uct/open-approve/uct-manual-service-v2:latest
DRAFT_IMAGE=registry.gitlab.ibdf-frankfurt.de/uct/open-approve/uct-draft-service:0.5.0
IMPORT_IMAGE=registry.gitlab.ibdf-frankfurt.de/proskive/uct-project-import-service/develop:4.0.0

#----------------------------------------------------------------------------------
# Only needed when running multiple instances, so that docker won't get confused
#----------------------------------------------------------------------------------
CONTAINER_NAME_SUFFIX=-demo2

#----------------------------------------------------------------------------------
# POSTGRESQL CONFIGURATION
# ⚠️  CHANGE THESE CREDENTIALS FOR PRODUCTION
#----------------------------------------------------------------------------------
APPROVE_POSTGRES_USER=postgres_admin
APPROVE_POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
APPROVE_AUTH_DB=auth_db
APPROVE_PROJECT_DB=approve_db
POSTGRES_CONTAINER_URL="approve.postgres${CONTAINER_NAME_SUFFIX}"
POSTGRES_PORT=5432

#----------------------------------------------------------------------------------
# MONGODB CONFIGURATION
# ⚠️  CHANGE THESE CREDENTIALS FOR PRODUCTION
#----------------------------------------------------------------------------------
APPROVE_MONGO_USER=mongo_admin
APPROVE_MONGO_PASSWORD=CHANGE_ME_STRONG_PASSWORD
MONGO_URL="mongodb://approve.mongo${CONTAINER_NAME_SUFFIX}"
MONGO_PORT=27017

#----------------------------------------------------------------------------------
# KEYCLOAK CONFIGURATION
# ⚠️  CHANGE THESE CREDENTIALS FOR PRODUCTION
#----------------------------------------------------------------------------------
# Keycloak realm name - will be created during installation
KEYCLOAK_REALM_NAME=production

# Admin credentials for Keycloak management console
APPROVE_KEYCLOAK_ADMIN_USER=adminuser
APPROVE_KEYCLOAK_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD

# Service account for REST API access
KEYCLOAK_USER_NAME=restuser
KEYCLOAK_USER_PASSWORD=CHANGE_ME_STRONG_PASSWORD
KEYCLOAK_REST_CLIENT_ID=APProVe-Web

# Keycloak client ID for frontend
APPROVE_CLIENT_ID=APProVe-Web

#----------------------------------------------------------------------------------
# APPROVE APPLICATION ADMIN USER
# ⚠️  CHANGE THESE CREDENTIALS FOR PRODUCTION
#----------------------------------------------------------------------------------
APPROVE_ADMIN_USER=approve-admin
APPROVE_ADMIN_PASSWORD=CHANGE_ME_STRONG_PASSWORD
APPROVE_ADMIN_EMAIL=admin@example.com

#----------------------------------------------------------------------------------
# PUBLIC URLS (HTTPS)
# ⚠️  MUST BE CONFIGURED - Replace with your actual domains
#----------------------------------------------------------------------------------
APPROVE_KEYCLOAK_URL=https://auth.example.com
APPROVE_FRONTEND_URL=https://approve.example.com
APPROVE_BACKEND_URL=https://backend.example.com

#----------------------------------------------------------------------------------
# INTERNAL SERVICE URLs
# These are constructed from APPROVE_BACKEND_URL and should not be changed
#----------------------------------------------------------------------------------
APPROVE_USER_URL="${APPROVE_BACKEND_URL}/user-service/"
APPROVE_AUTOMATION_URL="${APPROVE_BACKEND_URL}/automation-service/"
APPROVE_COMMENTS_URL="${APPROVE_BACKEND_URL}/comment-service/"
APPROVE_MAIL_URL="${APPROVE_BACKEND_URL}/mail-service/"
APPROVE_MANUAL_URL="${APPROVE_BACKEND_URL}/manual/"
APPROVE_DRAFT_URL="${APPROVE_BACKEND_URL}/draft-service/"
APPROVE_IMPORT_URL="${APPROVE_BACKEND_URL}/import-service/"

#----------------------------------------------------------------------------------
# SERVICE DISCOVERY (EUREKA)
#----------------------------------------------------------------------------------
EUREKA_URL="http://approve.eureka${CONTAINER_NAME_SUFFIX}:${EUREKA_PORT}/eureka"
EUREKA_CONTAINER_URL="approve.eureka${CONTAINER_NAME_SUFFIX}"
EUREKA_PORT=8761

#----------------------------------------------------------------------------------
# CONFIGURATION SERVICE
#----------------------------------------------------------------------------------
CONFIG_CONTAINER_URL="approve.config${CONTAINER_NAME_SUFFIX}"
CONFIG_PORT=8888

#----------------------------------------------------------------------------------
# SERVICE PORTS (LOCALHOST ONLY - Behind NGINX)
# These ports are only exposed on localhost and proxied by nginx
#----------------------------------------------------------------------------------
AUTH_PORT=8093
BACKEND_PORT=8010
FRONTEND_PORT=8011
USER_PORT=9011
COMMENT_PORT=3334
EMAIL_PORT=4334
AUTOMATION_PORT=3433
MANUAL_PORT=8443
DRAFT_PORT=8012
IMPORT_PORT=8013

#----------------------------------------------------------------------------------
# SECURITY & ENCRYPTION
# ⚠️  AUTOMATICALLY GENERATED - DO NOT MODIFY MANUALLY
#----------------------------------------------------------------------------------
# This will be auto-generated by generate_env.sh using: openssl rand -hex 32
# ENCRYPTION_KEY=

#----------------------------------------------------------------------------------
# CONTAINER NAMING
# Only needed if running multiple APProVe instances on same server
#----------------------------------------------------------------------------------
# Leave blank for single instance
# CONTAINER_NAME_SUFFIX=

#----------------------------------------------------------------------------------
# PERFORMANCE & RESOURCE LIMITS
#----------------------------------------------------------------------------------
# Java heap settings for microservices
JAVA_OPTS_BACKEND=-XX:+UseSerialGC -XX:MaxRAM=1024m
JAVA_OPTS_EUREKA=-XX:+UseSerialGC -XX:MaxRAM=512m -Xmx1G -Xms80m

#----------------------------------------------------------------------------------
# DOCKER COMPOSE SETTINGS
#----------------------------------------------------------------------------------
COMPOSE_PROJECT_NAME=approve-server
COMPOSE_HTTP_TIMEOUT=200
